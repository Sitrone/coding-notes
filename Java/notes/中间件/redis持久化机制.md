* RDB - 快照 

RDB方式是通过快照方式完成的,当符合一定条件时Redis会自动将内存中的所有数据进行快照并且存储到硬盘上。进行快照的条件在配置文件中指定,有2个参数构成:时间和改动键的个数,当在指定时间内被更改的键的个数大于指定数值时就会进行快照。RDB是Redis默认的持久化方式

所以内存不宜设置超过物理内存的50%，否则会内存不足引发IO等待，使redis访问速度骤减，占用空间小，恢复速度快，适用于灾难恢复，但是宕机会丢失数据。
推荐配置：

```shell
save 900 1

save 300 10

save 60 10000
```

* AOF - 持久化 

默认会将每个收到的写指令通过write函数追加到文本 appendonly.aof 中，通过将新记录追加到文本尾部来持久化数据，为防止文件占用空间过大，redis有后台线程定期的重建aof文件，而不会影响client端的操作

刷新文件的方式，配置appendfsync 参数：
1. always，非常慢，client需要每次等到刷新到磁盘上面成功之后才返回成功，数据安全最高
2. everysec，每秒刷一次，很快，但是可能会丢失这1s里面的数据（**推荐**） 
3. no，依靠os刷新，最快，安全性差



